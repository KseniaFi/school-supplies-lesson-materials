<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Supplies</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-image: url('Photos/IMG_20250923_225112_703.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 100, 0, 0.6);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            width: 90%;
            text-align: center;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-bottom: 30px;
            width: 100%;
        }

        .music-control {
            cursor: pointer;
            z-index: 10;
        }

        .music-control img {
            width: 40px;
            height: 40px;
            filter: brightness(0) invert(1);
        }

        .flashcards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .flashcard {
            width: 250px;
            height: 350px;
            perspective: 1000px;
            margin: 0 auto;
            cursor: pointer;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background-image: url('Photos/IMG_20250923_225112_703.jpg');
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .flashcard-front::before, .flashcard-back::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.85);
            z-index: 1;
        }

        .flashcard-front > *, .flashcard-back > * {
            position: relative;
            z-index: 2;
        }

        .flashcard-back {
            transform: rotateY(180deg);
        }

        .flashcard img {
            max-width: 100%;
            max-height: 80%;
            object-fit: contain;
        }

        .word-container {
            position: relative;
            margin-top: 15px;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .word {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            opacity: 1;
        }

        .pen {
            position: absolute;
            width: 40px;
            height: 40px;
            top: -10px;
            left: 0;
            opacity: 1;
            transform: rotate(45deg);
        }

        .writing .pen {
            animation: writeWord 3s forwards;
        }

        @keyframes writeWord {
            0% { 
                transform: translateX(0) rotate(45deg);
            }
            15% {
                transform: translateX(10%) rotate(40deg);
            }
            30% {
                transform: translateX(20%) rotate(50deg);
            }
            45% {
                transform: translateX(35%) rotate(45deg);
            }
            60% {
                transform: translateX(50%) rotate(40deg);
            }
            75% {
                transform: translateX(70%) rotate(50deg);
            }
            90% {
                transform: translateX(85%) rotate(45deg);
            }
            100% { 
                transform: translateX(calc(100% - 40px)) rotate(45deg);
            }
        }

        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: gold;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .return-btn, .pdf-btn {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .return-btn:hover, .pdf-btn:hover {
            background-color: #27ae60;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        /* PDF-specific styles */
        .pdf-page {
            width: 210mm;
            height: 297mm;
            padding: 20mm;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            margin-bottom: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .pdf-card {
            width: 160mm;
            height: 220mm;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid #2ecc71;
            border-radius: 15px;
            padding: 20px;
            background: white;
        }

        .pdf-card img {
            max-width: 100%;
            max-height: 70%;
            object-fit: contain;
            margin-bottom: 20px;
        }

        .pdf-word {
            font-size: 48px;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="music-control" id="musicControl">
                <img src="Photos/IMG_20250924_233220_221.png" alt="Music Toggle">
            </div>
        </div>
        
        <div class="flashcards-container" id="flashcardsContainer">
            <!-- Flashcards will be generated by JavaScript -->
        </div>

        <div class="control-buttons">
            <button class="return-btn" id="returnBtn">Return to Start</button>
            <button class="pdf-btn" id="pdfBtn">Download as PDF</button>
        </div>
    </div>

    <audio id="backgroundMusic" loop>
        <source src="Photos/Sands of Dakar (2).mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Include required libraries for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        // Flashcards data
        const flashcardsData = [
            { frontImage: 'Photos/IMG_20250919_232418_790.png', word: 'Pencil' },
            { frontImage: 'Photos/IMG_20250919_232423_045.png', word: 'Pencil case' },
            { frontImage: 'Photos/IMG_20250919_232606_526.png', word: 'School bag' },
            { frontImage: 'Photos/IMG_20250919_232803_161.png', word: 'Pen' },
            { frontImage: 'Photos/IMG_20250919_232929_838.png', word: 'Ruler' },
            { frontImage: 'Photos/IMG_20250919_233128_504.png', word: 'Rubber' },
            { frontImage: 'Photos/IMG_20250922_144528_678.png', word: 'Sharpener' },
            { frontImage: 'Photos/IMG_20250922_150645_496.png', word: 'Notebook' },
            { frontImage: 'Photos/InShot_20250924_230525353.png', word: 'Glue stick' },
            { frontImage: 'Photos/IMG_20250922_153858_402.png', word: 'Book' }
        ];

        const penImage = 'Photos/IMG_20250924_232416_482.png';
        
        // Generate flashcards
        const flashcardsContainer = document.getElementById('flashcardsContainer');
        
        flashcardsData.forEach((card, index) => {
            const flashcard = document.createElement('div');
            flashcard.className = 'flashcard';
            flashcard.innerHTML = `
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <img src="${card.frontImage}" alt="${card.word}">
                    </div>
                    <div class="flashcard-back">
                        <img src="${card.frontImage}" alt="${card.word}">
                        <div class="word-container">
                            <span class="word">${card.word}</span>
                            <img class="pen" src="${penImage}" alt="Pen">
                        </div>
                    </div>
                </div>
            `;
            
            flashcard.addEventListener('click', function() {
                if (!this.classList.contains('flipped')) {
                    this.classList.add('flipped');
                    const backSide = this.querySelector('.flashcard-back');
                    backSide.classList.add('writing');
                    
                    // Create sparkle effect
                    createSparkleEffect(this);
                    
                    // Reset animation for subsequent clicks
                    setTimeout(() => {
                        backSide.classList.remove('writing');
                        void backSide.offsetWidth; // Trigger reflow
                    }, 3000);
                }
            });
            
            flashcardsContainer.appendChild(flashcard);
        });

        // Create sparkle effect function
        function createSparkleEffect(cardElement) {
            const backSide = cardElement.querySelector('.flashcard-back');
            const sparkleCount = 15;
            
            for (let i = 0; i < sparkleCount; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                
                // Random position
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                
                // Random size
                const size = Math.random() * 8 + 4;
                
                // Random color
                const colors = ['gold', 'silver', '#ff6b6b', '#4ecdc4', '#ffe66d'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                sparkle.style.left = `${x}%`;
                sparkle.style.top = `${y}%`;
                sparkle.style.width = `${size}px`;
                sparkle.style.height = `${size}px`;
                sparkle.style.background = color;
                
                backSide.appendChild(sparkle);
                
                // Animate sparkle
                const animation = sparkle.animate([
                    { transform: 'scale(0) rotate(0deg)', opacity: 0 },
                    { transform: 'scale(1) rotate(180deg)', opacity: 1 },
                    { transform: 'scale(0) rotate(360deg)', opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 1000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                animation.onfinish = () => {
                    if (sparkle.parentNode) {
                        sparkle.parentNode.removeChild(sparkle);
                    }
                };
            }
        }

        // Music control
        const musicControl = document.getElementById('musicControl');
        const backgroundMusic = document.getElementById('backgroundMusic');
        let musicPlaying = false;

        musicControl.addEventListener('click', function() {
            if (musicPlaying) {
                backgroundMusic.pause();
                musicPlaying = false;
            } else {
                backgroundMusic.play().catch(e => {
                    console.log("Audio play failed:", e);
                });
                musicPlaying = true;
            }
        });

        // Return to start button
        const returnBtn = document.getElementById('returnBtn');
        returnBtn.addEventListener('click', function() {
            const flippedCards = document.querySelectorAll('.flashcard.flipped');
            flippedCards.forEach(card => {
                card.classList.remove('flipped');
            });
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // PDF generation function
        const pdfBtn = document.getElementById('pdfBtn');
        pdfBtn.addEventListener('click', generatePdf);

        function generatePdf() {
            const { jsPDF } = window.jspdf;
            
            // Create a new PDF document
            const doc = new jsPDF('p', 'mm', 'a4');
            
            // Create a temporary container for PDF pages
            const pdfContainer = document.createElement('div');
            pdfContainer.style.position = 'absolute';
            pdfContainer.style.left = '-9999px';
            pdfContainer.style.top = '0';
            document.body.appendChild(pdfContainer);
            
            // Create a PDF page for each flashcard
            const promises = flashcardsData.map((card, index) => {
                return new Promise((resolve) => {
                    const page = document.createElement('div');
                    page.className = 'pdf-page';
                    
                    const pdfCard = document.createElement('div');
                    pdfCard.className = 'pdf-card';
                    
                    const img = document.createElement('img');
                    img.src = card.frontImage;
                    img.alt = card.word;
                    
                    const word = document.createElement('div');
                    word.className = 'pdf-word';
                    word.textContent = card.word;
                    
                    pdfCard.appendChild(img);
                    pdfCard.appendChild(word);
                    page.appendChild(pdfCard);
                    pdfContainer.appendChild(page);
                    
                    // Use setTimeout to ensure DOM is updated
                    setTimeout(() => {
                        html2canvas(page, {
                            scale: 2,
                            useCORS: true,
                            logging: false,
                            backgroundColor: '#ffffff'
                        }).then(canvas => {
                            const imgData = canvas.toDataURL('image/jpeg', 0.9);
                            
                            if (index > 0) {
                                doc.addPage();
                            }
                            
                            // Add the image to PDF (full page)
                            doc.addImage(imgData, 'JPEG', 0, 0, 210, 297);
                            
                            // Remove the page from temporary container
                            pdfContainer.removeChild(page);
                            
                            resolve();
                        });
                    }, 100);
                });
            });
            
            // When all pages are processed, save the PDF
            Promise.all(promises).then(() => {
                // Save the PDF
                doc.save('school-supplies-flashcards.pdf');
                
                // Remove the temporary container
                document.body.removeChild(pdfContainer);
            });
        }

        // Attempt to autoplay music with user interaction
        document.addEventListener('click', function initAudio() {
            if (!musicPlaying) {
                backgroundMusic.volume = 0.3;
                backgroundMusic.play().then(() => {
                    musicPlaying = true;
                }).catch(e => {
                    console.log("Autoplay prevented:", e);
                });
            }
            document.removeEventListener('click', initAudio);
        });
    </script>
</body>
</html>
